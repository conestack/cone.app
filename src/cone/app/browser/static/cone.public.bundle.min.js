var cone=function(e,t){"use strict";const s={MOBILE:0,SMALL:1,MEDIUM:2,LARGE:3};const i=new class{constructor(){this.state=null,this._mobile_query="(max-width:559.9px)",this._small_query="(min-width:560px) and (max-width: 989.9px)",this._medium_query="(min-width:560px) and (max-width: 1200px)",this.update_viewport(),t(window).on("resize",this.resize_handle.bind(this))}update_viewport(){window.matchMedia(this._mobile_query).matches?this.state=s.MOBILE:window.matchMedia(this._small_query).matches?this.state=s.SMALL:window.matchMedia(this._medium_query).matches?this.state=s.MEDIUM:this.state=s.LARGE}resize_handle(e){let s=this.state;if(this.update_viewport(),e&&s!=this.state){var i=t.Event("viewport_changed");i.state=this.state,t(window).trigger(i)}}};class o{constructor(){this.vp_state=i.state,this._viewport_changed_handle=this.viewport_changed.bind(this),t(window).on("viewport_changed",this._viewport_changed_handle)}unload(){t(window).off("viewport_changed",this._viewport_changed_handle)}viewport_changed(e){this.vp_state=e.state}}let n=null;class h{static initialize(e){let s=t("#page-content-wrapper",e);return n=s.length?new h(s):null,n}constructor(e){this.elem=e}}function l(e){e.hasClass("bi-chevron-up")?(e.removeClass("bi-chevron-up"),e.addClass("bi-chevron-down")):(e.removeClass("bi-chevron-down"),e.addClass("bi-chevron-up"))}class a{constructor(e){this.elem=e,this.children=e.data("menu-items"),this.children&&(this.menu=t('\n            <div class="cone-mainmenu-dropdown">\n                <ul class="mainmenu-dropdown">\n                </ul>\n            </div>\n        '),this.dd=t("ul",this.menu),this.arrow=t("i.dropdown-arrow",this.elem),this.render_dd(),this._toggle=this.mouseenter_toggle.bind(this),this.elem.off().on("mouseenter mouseleave",this._toggle),this.menu.off().on("mouseenter mouseleave",(()=>{this.menu.toggle()})))}render_dd(){for(let e in this.children){let s=this.children[e],i=t(`\n              <li class="${s.selected?"active":""}">\n                <a href="${s.url}"\n                   title="${s.title}">\n                  <i class="${s.icon}"></i>\n                  <span>\n                    ${s.title?s.title:"&nbsp;"}\n                  </span>\n                </a>\n              </li>\n            `);this.dd.append(i)}this.menu.appendTo("#layout")}mv_to_mobile(){this.menu.off().detach().appendTo(this.elem).css("left","0"),this.elem.off(),this.arrow.off().on("click",(()=>{this.menu.slideToggle("fast"),l(this.arrow)}))}mv_to_top(){this.menu.detach().appendTo("#layout"),this.arrow.off(),this.elem.off().on("mouseenter mouseleave",this._toggle),this.menu.off().on("mouseenter mouseleave",(()=>{this.menu.toggle()}))}mouseenter_toggle(e){this.menu.offset({left:this.elem.offset().left}),"mouseenter"===e.type?this.menu.css("display","block"):this.menu.css("display","none")}}function r(e,t,s){var i,o;s?((i=new Date).setTime(i.getTime()+24*s*60*60*1e3),o="; expires="+i.toGMTString()):o="",document.cookie=e+"="+escape(t)+o+"; path=/;"}function d(e){var t,s,i=e+"=",o=document.cookie.split(";");for(t=0;t<o.length;t+=1){for(s=o[t];" "===s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(i))return unescape(s.substring(i.length,s.length))}return null}let c={theme_switcher:null,mainmenu_top:null,mainmenu_sidebar:null,navtree:null,sidebar:null,mobile_nav:null};class m{static initialize(e){let s=t("#mainmenu_sidebar",e);return s.length&&null!==c.sidebar?(null!==c.mainmenu_sidebar&&c.mainmenu_sidebar.unload(),c.mainmenu_sidebar=new m(s)):c.mainmenu_sidebar=null,c.mainmenu_sidebar}constructor(e){this.elem=e,this.items=t('>li:not(".sidebar-heading")',this.elem),this.arrows=t("i.dropdown-arrow",this.items),this.menus=t(".sb-menu",this.elem),this.initial_cookie(),this._collapse=this.collapse.bind(this),this._expand=this.expand.bind(this),c.sidebar.collapsed?this.collapse():this.expand(),t(window).on("sidebar_collapsed",this._collapse),t(window).on("sidebar_expanded",this._expand)}unload(){this.items.off(),this.arrows.off()}initial_cookie(){let e=d("sidebar menus");if(e)this.display_data=e.split(",");else{this.display_data=[];for(let e of this.menus)this.display_data.push("none")}}collapse(){t("ul",this.items).hide(),this.arrows.off("click");for(let e of this.items){let s=t(e),i=t("ul",s);function o(){s.addClass("hover");let e=s.outerWidth(),t=i.outerWidth();e>t?i.css("width",e):s.css("width",t),i.show()}s.off().on("mouseenter",o),s.on("mouseleave",(()=>{i.hide(),s.removeClass("hover").css("width","auto")})),t(window).on("dragstart",(()=>{s.off("mouseenter",o)})).on("dragend",(()=>{s.on("mouseenter",o)}))}}expand(){this.items.off("mouseenter mouseleave");for(let e=0;e<this.menus.length;e++){let s=this.menus[e],i=t("i.dropdown-arrow",s),o=t("ul.cone-mainmenu-dropdown-sb",s);o.css("display",this.display_data[e]),"block"===o.css("display")?i.removeClass("bi-chevron-down").addClass("bi-chevron-up"):i.removeClass("bi-chevron-up").addClass("bi-chevron-down"),i.off().on("click",(()=>{let t="block"===o.css("display")?"none":"block";o.slideToggle("fast"),l(i),this.display_data[e]=t,r("sidebar menus",this.display_data,null)}))}}mv_to_mobile(e){this.elem.detach().appendTo(e).addClass("mobile"),this.expand()}mv_to_sidebar(){this.elem.detach().appendTo(c.sidebar.content).removeClass("mobile")}}class u{constructor(e){this.elem=e,this.content=t(">",this.elem),this.scrollbar=t('<div class="scrollbar" />'),this.thumb=t('<div class="scroll-handle" />'),this.position=0,this.unit=10,this.compile(),this.observe_container(),this._scroll=this.scroll_handle.bind(this),this.elem.on("mousewheel wheel",this._scroll),this._click_handle=this.click_handle.bind(this),this.scrollbar.on("click",this._click_handle),this._drag_handle=this.drag_handle.bind(this),this.thumb.on("mousedown",this._drag_handle),this._mousehandle=this.mouse_in_out.bind(this),this.elem.on("mouseenter mouseleave",this._mousehandle)}observe_container(){this.scrollbar_observer=new ResizeObserver((e=>{for(let t of e)this.update()})),this.scrollbar_observer.observe(this.elem.get(0))}compile(){}update(){}unload(){this.scrollbar.off("click",this._click_handle),this.elem.off("mousewheel wheel",this._scroll),this.elem.off("mouseenter mouseleave",this._mousehandle),this.thumb.off("mousedown",this._drag_handle),this.scrollbar_observer.unobserve(this.elem.get(0))}mouse_in_out(e){this.contentsize>this.scrollsize&&("mouseenter"==e.type?this.scrollbar.fadeIn():this.scrollbar.fadeOut())}scroll_handle(e){if(this.contentsize<=this.scrollsize)return;let t=e.originalEvent;"number"==typeof t.deltaY&&(t.deltaY>0?this.position+=this.unit:t.deltaY<0&&(this.position-=this.unit)),this.set_position()}prevent_overflow(){let e=this.contentsize-this.scrollsize;this.position>=e?this.position=e:this.position<=0&&(this.position=0)}click_handle(e){e.preventDefault(),this.thumb.addClass("active");let t=this.get_evt_data(e)-this.get_offset()-this.thumbsize/2;this.position=this.contentsize*t/this.scrollsize,this.set_position(),this.thumb.removeClass("active")}drag_handle(e){e.preventDefault();var s=t.Event("dragstart");t(window).trigger(s);let i=function(e){let t=this.get_evt_data(e)-this.get_offset(),s=h+t-n;this.position=this.contentsize*s/this.scrollsize,this.set_position()}.bind(this),o=function(){var e=t.Event("dragend");t(window).trigger(e),t(document).off("mousemove",i).off("mouseup",o),this.thumb.removeClass("active"),this.elem.on("mouseenter mouseleave",this._mousehandle)}.bind(this),n=this.get_evt_data(e)-this.get_offset(),h=this.position/(this.contentsize/this.scrollsize);this.thumb.addClass("active"),this.elem.off("mouseenter mouseleave",this._mousehandle),t(document).on("mousemove",i).on("mouseup",o)}}class _ extends u{constructor(e){super(e)}compile(){this.content.addClass("scroll-content"),this.elem.addClass("scroll-container").prepend(this.scrollbar),this.scrollbar.append(this.thumb),this.thumb.css("height","6px"),this.scrollbar.css("height","6px"),this.scrollsize=this.elem.outerWidth(),this.contentsize=this.content.outerWidth(),this.scrollbar.css("width",this.scrollsize),this.thumbsize=this.scrollsize/(this.contentsize/this.scrollsize),this.thumb.css("width",this.thumbsize)}update(){this.scrollsize=this.elem.outerWidth(),this.scrollbar.css("width",this.scrollsize),this.content.outerWidth()!==this.contentsize&&(this.contentsize=this.content.outerWidth()),this.contentsize<=this.scrollsize?this.thumbsize=this.scrollsize:this.thumbsize=Math.pow(this.scrollsize,2)/this.contentsize,this.thumb.css("width",this.thumbsize),this.set_position()}set_position(){this.prevent_overflow();let e=this.position/(this.contentsize/this.scrollsize);this.content.css("right",this.position+"px"),this.thumb.css("left",e+"px")}get_evt_data(e){return e.pageX}get_offset(){return this.elem.offset().left}}class p{static initialize(e){let s=t("#main-menu",e);return s.length?c.mainmenu_top=new p(s):c.mainmenu_top=null,c.mainmenu_top}constructor(e){this.elem=e,new _(e),this.main_menu_items=[];let s=this;this.content=t("ul#mainmenu"),t("li",this.content).each((function(){let e=new a(t(this));s.main_menu_items.push(e)})),this.handle_scrollbar()}handle_scrollbar(){for(let e of this.main_menu_items)t(window).on("dragstart",(()=>{e.elem.off("mouseenter mouseleave",e._toggle)})).on("dragend",(()=>{e.elem.on("mouseenter mouseleave",e._toggle)}))}mv_to_mobile(){for(let e in this.main_menu_items){let t=this.main_menu_items[e];t.menu&&t.mv_to_mobile()}}mv_to_top(){for(let e in this.main_menu_items){let t=this.main_menu_items[e];t.menu&&t.mv_to_top()}}}class g{static initialize(e){let s=t("#navtree",e);return s.length?c.navtree=new g(s):c.navtree=null,c.navtree}constructor(e){this.elem=e,this.content=t("#navtree-content",e),this.heading=t("#navtree-heading",e),this.toggle_elems=t("li.navtreelevel_1",e),this._mouseenter_handle=this.align_width.bind(this),this.toggle_elems.on("mouseenter",this._mouseenter_handle),this._restore=this.restore_width.bind(this),this.toggle_elems.on("mouseleave",this._restore),this.scrollbar_handle()}unload(){this.heading.off("click"),this.toggle_elems.off("mouseenter",this._mouseenter_handle).off("mouseleave",this._restore)}align_width(e){let s=t(e.currentTarget);s.addClass("hover"),s.outerWidth()>t("ul",s).outerWidth()?t("ul",s).css("width",s.outerWidth()):s.css("width",t("ul",s).outerWidth())}restore_width(e){t(e.currentTarget).css("width","auto"),t(e.currentTarget).removeClass("hover")}scrollbar_handle(){t(window).on("dragstart",(()=>{this.toggle_elems.off("mouseenter",this._mouseenter_handle)})).on("dragend",(()=>{this.toggle_elems.on("mouseenter",this._mouseenter_handle)}))}mv_to_mobile(e){this.elem.detach().appendTo(e).addClass("mobile"),this.content.hide(),this.heading.off("click").on("click",(()=>{this.content.slideToggle("fast")}))}mv_to_sidebar(){this.elem.detach().appendTo(c.sidebar.content).removeClass("mobile"),this.heading.off("click"),this.content.show()}}let b=null;class w extends o{static initialize(e){let s=t("#cone-searchbar",e);return b=s.length?new w(s):null,b}constructor(e){super(),this.elem=e,this.search_text=t("#livesearch-input",this.elem),this.search_group=t("#livesearch-group",this.elem),this.dd=t("#cone-livesearch-dropdown",this.elem),this.vp_state!==s.SMALL&&this.vp_state!==s.MEDIUM||(this.dd.addClass("dropdown-menu-end"),this.search_text.detach().prependTo(this.dd))}viewport_changed(e){super.viewport_changed(e),this.vp_state===s.SMALL||this.vp_state===s.MEDIUM?(this.dd.addClass("dropdown-menu-end"),this.search_text.detach().prependTo(this.dd)):(this.search_text.detach().prependTo(this.search_group),this.dd.removeClass("dropdown-menu-end"))}}t((function(){b=w.initialize()}));class v extends o{static initialize(e){let s=t("#sidebar_left",e);return s.length?c.sidebar=new v(s):c.sidebar=null,c.sidebar}constructor(e){super(),this.elem=e,this.content=t("#sidebar_content",e),this.toggle_btn=t("#sidebar-toggle-btn",e),this.toggle_arrow_elem=t("i",this.toggle_btn),this.lock_switch=t("#toggle-fluid"),this.cookie=null,this.collapsed=!1,this._toggle_menu_handle=this.toggle_menu.bind(this),this.toggle_btn.off("click").on("click",this._toggle_menu_handle),this._toggle_lock=this.toggle_lock.bind(this),this.lock_switch.off("click").on("click",this._toggle_lock),this.initial_load()}initial_load(){let e=d("sidebar");this.vp_state===s.MOBILE?this.elem.hide():null===e?this.vp_state!==s.LARGE?this.collapsed=!0:this.collapsed=!1:(this.cookie="true"===e,this.collapsed=this.cookie,this.lock_switch.addClass("active")),this.viewport_changed()}assign_state(){let e=!0===this.collapsed?"collapsed":"expanded",s="bi bi-arrow-"+(!0===this.collapsed?"right":"left")+"-circle";this.elem.attr("class",e),this.toggle_arrow_elem.attr("class",s);var i=t.Event(`sidebar_${e}`);t(window).trigger(i)}toggle_lock(){d("sidebar")?(r("sidebar","",-1),this.lock_switch.removeClass("active"),this.cookie=null):(this.lock_switch.addClass("active"),r("sidebar",this.collapsed,null),this.cookie=this.collapsed)}viewport_changed(e){if(e&&super.viewport_changed(e),this.vp_state===s.MOBILE)this.collapsed=!1,this.elem.hide();else if(null!==this.cookie)this.collapsed=this.cookie,this.elem.show();else if(this.vp_state===s.SMALL){this.elem.show();let e=this.vp_state===s.SMALL;e!=this.collapsed&&(this.collapsed=e)}else this.collapsed=!1,this.elem.show();this.assign_state()}toggle_menu(){this.collapsed=!this.collapsed,this.lock_switch.hasClass("active")&&(r("sidebar",this.collapsed,null),this.cookie=this.collapsed),this.assign_state()}}class f{static initialize(e,s){let i=t("#switch_mode",e);return i.length?c.theme_switcher=new f(i,s):c.theme_switcher=null,c.theme_switcher}constructor(e,s){this.elem=e,this.modes=s,this.link=t("head #colormode-styles"),this.elem.off("click").on("click",this.switch_theme.bind(this));let i=d("modeswitch");i||(i=s[0]),this.current=i}get current(){return this.link.attr("href")}set current(e){this.link.attr("href",e),r("modeswitch",e,null);let t=e!==this.modes[0];this.elem.prop("checked",t)}switch_theme(e){e.stopPropagation();let t=this.modes;this.current=this.current===t[0]?t[1]:t[0]}}let z=null;class k extends o{static initialize(e){let s=t("#topnav",e);return z=s.length?new k(s):null,z}constructor(e){super(),this.elem=e,this.content=t("#topnav-content",e),this.toggle_button=t("#mobile-menu-toggle",e),this.logo=t("#cone-logo",e),this.tb_dropdowns=t("#toolbar-top>li.dropdown",e),this._toggle_menu_handle=this.toggle_menu.bind(this),this.toggle_button.on("click",this._toggle_menu_handle),this.viewport_changed(),this.pt=t("#personaltools"),this.user=t("#user"),this.pt_handle()}toggle_menu(){"none"===this.content.css("display")?(this.content.slideToggle("fast"),this.content.css("display","flex")):this.content.slideToggle("fast")}viewport_changed(e){e&&super.viewport_changed(e),this.vp_state===s.MOBILE?(this.content.hide(),this.elem.addClass("mobile"),this.tb_dropdowns.off().on("show.bs.dropdown",(()=>{this.content.hide()}))):(this.content.show(),this.elem.removeClass("mobile"),this.tb_dropdowns.off()),this.pt&&this.pt_handle()}pt_handle(){this.vp_state===s.MOBILE?(this.pt.off("show.bs.dropdown").on("show.bs.dropdown",(()=>{this.user.stop(!0,!0).slideDown("fast"),l(t("i.dropdown-arrow","#personaltools"))})),this.pt.off("hide.bs.dropdown").on("hide.bs.dropdown",(()=>{this.user.stop(!0,!0).slideUp("fast"),l(t("i.dropdown-arrow","#personaltools"))}))):(this.pt.off("show.bs.dropdown").on("show.bs.dropdown",(()=>{this.user.show()})),this.pt.off("hide.bs.dropdown").on("hide.bs.dropdown",(()=>{this.user.hide()})))}}class x extends o{static initialize(e){let s=t("#topnav-content",e);return s.length?c.mobile_nav=new x(s):c.mobile_nav=null,c.mobile_nav}constructor(e){super(),this.elem=e,this.viewport_changed()}viewport_changed(e){e&&super.viewport_changed(e),null!==c.mainmenu_sidebar?this.vp_state===s.MOBILE?(c.mainmenu_sidebar.mv_to_mobile(this.elem),null!==c.mainmenu_top&&c.mainmenu_top.elem.hide()):(c.mainmenu_sidebar.mv_to_sidebar(),null!==c.mainmenu_top&&c.mainmenu_top.elem.show()):null===c.mainmenu_sidebar&&null!==c.mainmenu_top&&(this.vp_state===s.MOBILE?c.mainmenu_top.mv_to_mobile():c.mainmenu_top.mv_to_top()),null!==c.mainmenu_top&&(this.vp_state===s.MOBILE?t("#cone-logo").css("margin-right","auto"):t("#cone-logo").css("margin-right","2rem")),null!==c.navtree&&(this.vp_state===s.MOBILE?c.navtree.mv_to_mobile(this.elem):c.navtree.mv_to_sidebar())}}e.Content=h,e.MainMenuItem=a,e.MainMenuSidebar=m,e.MainMenuTop=p,e.MobileNav=x,e.Navtree=g,e.ScrollBar=u,e.ScrollBarX=_,e.ScrollBarY=class extends u{constructor(e){super(e)}compile(){this.content.addClass("scroll-content"),this.elem.addClass("scroll-container").prepend(this.scrollbar),this.scrollbar.append(this.thumb),this.thumb.css("width","6px"),this.scrollbar.css("width","6px"),this.scrollbar.css("right","0px"),this.scrollsize=this.elem.outerHeight(),this.contentsize=this.content.outerHeight(),this.scrollbar.css("height",this.scrollsize),this.thumbsize=this.scrollsize/(this.contentsize/this.scrollsize),this.thumb.css("height",this.thumbsize)}update(){this.scrollsize=this.elem.outerHeight(),this.scrollbar.css("height",this.scrollsize),this.content.outerHeight()!==this.contentsize&&(this.contentsize=this.content.outerHeight()),this.contentsize<=this.scrollsize?this.thumbsize=this.scrollsize:this.thumbsize=Math.pow(this.scrollsize,2)/this.contentsize,this.thumb.css("height",this.thumbsize),this.set_position()}set_position(){this.prevent_overflow();let e=this.position/(this.contentsize/this.scrollsize);this.content.css("bottom",this.position+"px"),this.thumb.css("top",e+"px")}get_evt_data(e){return e.pageY}get_offset(){return this.elem.offset().top}},e.Searchbar=w,e.Sidebar=v,e.ThemeSwitcher=f,e.Topnav=k,e.ViewPortAware=o,e.createCookie=r,e.default_themes=["/static/light.css","/static/dark.css"],e.readCookie=d,e.toggle_arrow=l,e.vp=i,e.vp_states=s,Object.defineProperty(e,"__esModule",{value:!0});var C=window.cone;return e.noConflict=function(){return window.cone=C,this},window.cone=e,e}({},jQuery);
