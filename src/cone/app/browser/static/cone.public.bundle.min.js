var cone=function(t,e){"use strict";const s={MOBILE:0,SMALL:1,MEDIUM:2,LARGE:3};const i=new class{constructor(){this.state=null,this._mobile_query="(max-width:559.9px)",this._small_query="(min-width:560px) and (max-width: 989.9px)",this._medium_query="(min-width:560px) and (max-width: 1200px)",this.update_viewport(),e(window).on("resize",this.resize_handle.bind(this))}update_viewport(){window.matchMedia(this._mobile_query).matches?this.state=s.MOBILE:window.matchMedia(this._small_query).matches?this.state=s.SMALL:window.matchMedia(this._medium_query).matches?this.state=s.MEDIUM:this.state=s.LARGE}resize_handle(t){let s=this.state;if(this.update_viewport(),t&&s!=this.state){var i=e.Event("viewport_changed");i.state=this.state,e(window).trigger(i)}}};class o{constructor(){this.vp_state=i.state,this._viewport_changed_handle=this.viewport_changed.bind(this),e(window).on("viewport_changed",this._viewport_changed_handle)}unload(){e(window).off("viewport_changed",this._viewport_changed_handle)}viewport_changed(t){this.vp_state=t.state}}function n(t,e,s){var i,o;s?((i=new Date).setTime(i.getTime()+24*s*60*60*1e3),o="; expires="+i.toGMTString()):o="",document.cookie=t+"="+escape(e)+o+"; path=/;"}function h(t){var e,s,i=t+"=",o=document.cookie.split(";");for(e=0;e<o.length;e+=1){for(s=o[e];" "===s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(i))return unescape(s.substring(i.length,s.length))}return null}let l={theme_switcher:null,mainmenu_top:null,mainmenu_sidebar:null,navtree:null,sidebar:null,mobile_nav:null,content:null,topnav:null,searchbar:null};class a extends o{static initialize(t){let s=e("#sidebar_left",t);if(s.length)return l.sidebar=new a(s),l.sidebar}constructor(t){super(),this.elem=t,this.content=e("#sidebar_content",t),this.toggle_btn=e("#sidebar-toggle-btn",t),this.toggle_arrow_elem=e("i",this.toggle_btn),this.lock_switch=e("#toggle-fluid"),this.cookie=null,this.collapsed=!1,this._toggle_menu_handle=this.toggle_menu.bind(this),this.toggle_btn.off("click").on("click",this._toggle_menu_handle),this._toggle_lock=this.toggle_lock.bind(this),this.lock_switch.off("click").on("click",this._toggle_lock),this.initial_load()}initial_load(){let t=h("sidebar");this.vp_state===s.MOBILE?this.elem.hide():null===t?this.vp_state!==s.LARGE?this.collapsed=!0:this.collapsed=!1:(this.cookie="true"===t,this.collapsed=this.cookie,this.lock_switch.addClass("active")),this.viewport_changed()}assign_state(){let t=!0===this.collapsed?"collapsed":"expanded",s="bi bi-arrow-"+(!0===this.collapsed?"right":"left")+"-circle";this.elem.attr("class",t),this.toggle_arrow_elem.attr("class",s);var i=e.Event(`sidebar_${t}`);e(window).trigger(i)}toggle_lock(){h("sidebar")?(n("sidebar","",-1),this.lock_switch.removeClass("active"),this.cookie=null):(this.lock_switch.addClass("active"),n("sidebar",this.collapsed,null),this.cookie=this.collapsed)}viewport_changed(t){if(t&&super.viewport_changed(t),this.vp_state===s.MOBILE)this.collapsed=!1,this.elem.hide();else if(null!==this.cookie)this.collapsed=this.cookie,this.elem.show();else if(this.vp_state===s.SMALL){this.elem.show();let t=this.vp_state===s.SMALL;t!=this.collapsed&&(this.collapsed=t)}else this.collapsed=!1,this.elem.show();this.assign_state()}toggle_menu(){this.collapsed=!this.collapsed,this.lock_switch.hasClass("active")&&(n("sidebar",this.collapsed,null),this.cookie=this.collapsed),this.assign_state()}}function r(t){t.hasClass("bi-chevron-up")?(t.removeClass("bi-chevron-up"),t.addClass("bi-chevron-down")):(t.removeClass("bi-chevron-down"),t.addClass("bi-chevron-up"))}class d{static initialize(t){let s=e("#mainmenu_sidebar",t);if(s.length&&null!==l.sidebar)return null!==l.mainmenu_sidebar&&l.mainmenu_sidebar.unload(),l.mainmenu_sidebar=new d(s),l.mainmenu_sidebar}constructor(t){this.elem=t,this.items=e('>li:not(".sidebar-heading")',this.elem),this.arrows=e("i.dropdown-arrow",this.items),this.menus=e(".sb-menu",this.elem),this.initial_cookie(),this._collapse=this.collapse.bind(this),this._expand=this.expand.bind(this),l.sidebar.collapsed?this.collapse():this.expand(),e(window).on("sidebar_collapsed",this._collapse),e(window).on("sidebar_expanded",this._expand)}unload(){this.items.off(),this.arrows.off()}initial_cookie(){let t=h("sidebar menus");if(t)this.display_data=t.split(",");else{this.display_data=[];for(let t of this.menus)this.display_data.push("none")}}collapse(){e("ul",this.items).hide(),this.arrows.off("click");for(let t of this.items){let s=e(t),i=e("ul",s);function o(){s.addClass("hover");let t=s.outerWidth(),e=i.outerWidth();t>e?i.css("width",t):s.css("width",e),i.show()}s.off().on("mouseenter",o),s.on("mouseleave",(()=>{i.hide(),s.removeClass("hover").css("width","auto")})),e(window).on("dragstart",(()=>{s.off("mouseenter",o)})).on("dragend",(()=>{s.on("mouseenter",o)}))}}expand(){this.items.off("mouseenter mouseleave");for(let t=0;t<this.menus.length;t++){let s=this.menus[t],i=e("i.dropdown-arrow",s),o=e("ul.cone-mainmenu-dropdown-sb",s);o.css("display",this.display_data[t]),"block"===o.css("display")?i.removeClass("bi-chevron-down").addClass("bi-chevron-up"):i.removeClass("bi-chevron-up").addClass("bi-chevron-down"),i.off().on("click",(()=>{let e="block"===o.css("display")?"none":"block";o.slideToggle("fast"),r(i),this.display_data[t]=e,n("sidebar menus",this.display_data,null)}))}}mv_to_mobile(t){this.elem.detach().appendTo(t).addClass("mobile"),this.expand()}mv_to_sidebar(){this.elem.detach().appendTo(l.sidebar.content).removeClass("mobile")}}class c{constructor(t){this.elem=t,this.content=e(">",this.elem),this.scrollbar=e('<div class="scrollbar" />'),this.thumb=e('<div class="scroll-handle" />'),this.position=0,this.unit=10,this.compile(),this.observe_container(),this._scroll=this.scroll_handle.bind(this),this.elem.on("mousewheel wheel",this._scroll),this._click_handle=this.click_handle.bind(this),this.scrollbar.on("click",this._click_handle),this._drag_handle=this.drag_handle.bind(this),this.thumb.on("mousedown",this._drag_handle),this._mousehandle=this.mouse_in_out.bind(this),this.elem.on("mouseenter mouseleave",this._mousehandle)}observe_container(){this.scrollbar_observer=new ResizeObserver((t=>{for(let e of t)this.update()})),this.scrollbar_observer.observe(this.elem.get(0))}compile(){}update(){}unload(){this.scrollbar.off("click",this._click_handle),this.elem.off("mousewheel wheel",this._scroll),this.elem.off("mouseenter mouseleave",this._mousehandle),this.thumb.off("mousedown",this._drag_handle),this.scrollbar_observer.unobserve(this.elem.get(0))}mouse_in_out(t){this.contentsize>this.scrollsize&&("mouseenter"==t.type?this.scrollbar.fadeIn():this.scrollbar.fadeOut())}scroll_handle(t){if(this.contentsize<=this.scrollsize)return;let e=t.originalEvent;"number"==typeof e.deltaY&&(e.deltaY>0?this.position+=this.unit:e.deltaY<0&&(this.position-=this.unit)),this.set_position()}prevent_overflow(){let t=this.contentsize-this.scrollsize;this.position>=t?this.position=t:this.position<=0&&(this.position=0)}click_handle(t){t.preventDefault(),this.thumb.addClass("active");let e=this.get_evt_data(t)-this.get_offset()-this.thumbsize/2;this.position=this.contentsize*e/this.scrollsize,this.set_position(),this.thumb.removeClass("active")}drag_handle(t){t.preventDefault();var s=e.Event("dragstart");e(window).trigger(s);let i=function(t){let e=this.get_evt_data(t)-this.get_offset(),s=h+e-n;this.position=this.contentsize*s/this.scrollsize,this.set_position()}.bind(this),o=function(){var t=e.Event("dragend");e(window).trigger(t),e(document).off("mousemove",i).off("mouseup",o),this.thumb.removeClass("active"),this.elem.on("mouseenter mouseleave",this._mousehandle)}.bind(this),n=this.get_evt_data(t)-this.get_offset(),h=this.position/(this.contentsize/this.scrollsize);this.thumb.addClass("active"),this.elem.off("mouseenter mouseleave",this._mousehandle),e(document).on("mousemove",i).on("mouseup",o)}}class m extends c{constructor(t){super(t)}compile(){this.content.addClass("scroll-content"),this.elem.addClass("scroll-container").prepend(this.scrollbar),this.scrollbar.append(this.thumb),this.thumb.css("height","6px"),this.scrollbar.css("height","6px"),this.scrollsize=this.elem.outerWidth(),this.contentsize=this.content.outerWidth(),this.scrollbar.css("width",this.scrollsize),this.thumbsize=this.scrollsize/(this.contentsize/this.scrollsize),this.thumb.css("width",this.thumbsize)}update(){this.scrollsize=this.elem.outerWidth(),this.scrollbar.css("width",this.scrollsize),this.content.outerWidth()!==this.contentsize&&(this.contentsize=this.content.outerWidth()),this.contentsize<=this.scrollsize?this.thumbsize=this.scrollsize:this.thumbsize=Math.pow(this.scrollsize,2)/this.contentsize,this.thumb.css("width",this.thumbsize),this.set_position()}set_position(){this.prevent_overflow();let t=this.position/(this.contentsize/this.scrollsize);this.content.css("right",this.position+"px"),this.thumb.css("left",t+"px")}get_evt_data(t){return t.pageX}get_offset(){return this.elem.offset().left}}class u{constructor(t){this.elem=t,this.children=t.data("menu-items"),this.children&&(this.menu=e('\n            <div class="cone-mainmenu-dropdown">\n                <ul class="mainmenu-dropdown">\n                </ul>\n            </div>\n        '),this.dd=e("ul",this.menu),this.arrow=e("i.dropdown-arrow",this.elem),this.render_dd(),this._toggle=this.mouseenter_toggle.bind(this),this.elem.off().on("mouseenter mouseleave",this._toggle),this.menu.off().on("mouseenter mouseleave",(()=>{this.menu.toggle()})))}render_dd(){for(let t in this.children){let s=this.children[t],i=e(`\n              <li class="${s.selected?"active":""}">\n                <a href="${s.url}"\n                   title="${s.title}">\n                  <i class="${s.icon}"></i>\n                  <span>\n                    ${s.title?s.title:"&nbsp;"}\n                  </span>\n                </a>\n              </li>\n            `);this.dd.append(i)}this.menu.appendTo("#layout")}mv_to_mobile(){this.menu.off().detach().appendTo(this.elem).css("left","0"),this.elem.off(),this.arrow.off().on("click",(()=>{this.menu.slideToggle("fast"),r(this.arrow)}))}mv_to_top(){this.menu.detach().appendTo("#layout"),this.arrow.off(),this.elem.off().on("mouseenter mouseleave",this._toggle),this.menu.off().on("mouseenter mouseleave",(()=>{this.menu.toggle()}))}mouseenter_toggle(t){this.menu.offset({left:this.elem.offset().left}),"mouseenter"===t.type?this.menu.css("display","block"):this.menu.css("display","none")}}class _{static initialize(t){let s=e("#main-menu",t);if(s.length)return l.mainmenu_top=new _(s),l.mainmenu_top}constructor(t){this.elem=t,new m(t),this.main_menu_items=[];let s=this;this.content=e("ul#mainmenu"),e("li",this.content).each((function(){let t=new u(e(this));s.main_menu_items.push(t)})),this.handle_scrollbar()}handle_scrollbar(){for(let t of this.main_menu_items)e(window).on("dragstart",(()=>{t.elem.off("mouseenter mouseleave",t._toggle)})).on("dragend",(()=>{t.elem.on("mouseenter mouseleave",t._toggle)}))}mv_to_mobile(){for(let t in this.main_menu_items){let e=this.main_menu_items[t];e.menu&&e.mv_to_mobile()}}mv_to_top(){for(let t in this.main_menu_items){let e=this.main_menu_items[t];e.menu&&e.mv_to_top()}}}class p extends o{static initialize(t){let s=e("#cone-searchbar",t);if(s.length)return l.searchbar=new p(s),l.searchbar}constructor(t){super(),this.elem=t,this.search_text=e("#livesearch-input",this.elem),this.search_group=e("#livesearch-group",this.elem),this.dd=e("#cone-livesearch-dropdown",this.elem),this.vp_state!==s.SMALL&&this.vp_state!==s.MEDIUM||(this.dd.addClass("dropdown-menu-end"),this.search_text.detach().prependTo(this.dd))}viewport_changed(t){super.viewport_changed(t),this.vp_state===s.SMALL||this.vp_state===s.MEDIUM?(this.dd.addClass("dropdown-menu-end"),this.search_text.detach().prependTo(this.dd)):(this.search_text.detach().prependTo(this.search_group),this.dd.removeClass("dropdown-menu-end"))}}class g{static initialize(t){let s=e("#page-content-wrapper",t);if(s.length)return l.content=new g(s),l.content}constructor(t){this.elem=t}}class b extends o{static initialize(t){let s=e("#topnav",t);if(s.length)return l.topnav=new b(s),l.topnav}constructor(t){super(),this.elem=t,this.content=e("#topnav-content",t),this.toggle_button=e("#mobile-menu-toggle",t),this.logo=e("#cone-logo",t),this.tb_dropdowns=e("#toolbar-top>li.dropdown",t),this._toggle_menu_handle=this.toggle_menu.bind(this),this.toggle_button.on("click",this._toggle_menu_handle),this.viewport_changed(),this.pt=e("#personaltools"),this.user=e("#user"),this.pt_handle()}toggle_menu(){"none"===this.content.css("display")?(this.content.slideToggle("fast"),this.content.css("display","flex")):this.content.slideToggle("fast")}viewport_changed(t){t&&super.viewport_changed(t),this.vp_state===s.MOBILE?(this.content.hide(),this.elem.addClass("mobile"),this.tb_dropdowns.off().on("show.bs.dropdown",(()=>{this.content.hide()}))):(this.content.show(),this.elem.removeClass("mobile"),this.tb_dropdowns.off()),this.pt&&this.pt_handle()}pt_handle(){this.vp_state===s.MOBILE?(this.pt.off("show.bs.dropdown").on("show.bs.dropdown",(()=>{this.user.stop(!0,!0).slideDown("fast"),r(e("i.dropdown-arrow","#personaltools"))})),this.pt.off("hide.bs.dropdown").on("hide.bs.dropdown",(()=>{this.user.stop(!0,!0).slideUp("fast"),r(e("i.dropdown-arrow","#personaltools"))}))):(this.pt.off("show.bs.dropdown").on("show.bs.dropdown",(()=>{this.user.show()})),this.pt.off("hide.bs.dropdown").on("hide.bs.dropdown",(()=>{this.user.hide()})))}}class w{static initialize(t){let s=e("#navtree",t);if(s.length)return l.navtree=new w(s),l.navtree}constructor(t){this.elem=t,this.content=e("#navtree-content",t),this.heading=e("#navtree-heading",t),this.toggle_elems=e("li.navtreelevel_1",t),this._mouseenter_handle=this.align_width.bind(this),this.toggle_elems.on("mouseenter",this._mouseenter_handle),this._restore=this.restore_width.bind(this),this.toggle_elems.on("mouseleave",this._restore),this.scrollbar_handle()}unload(){this.heading.off("click"),this.toggle_elems.off("mouseenter",this._mouseenter_handle).off("mouseleave",this._restore)}align_width(t){let s=e(t.currentTarget);s.addClass("hover"),s.outerWidth()>e("ul",s).outerWidth()?e("ul",s).css("width",s.outerWidth()):s.css("width",e("ul",s).outerWidth())}restore_width(t){e(t.currentTarget).css("width","auto"),e(t.currentTarget).removeClass("hover")}scrollbar_handle(){e(window).on("dragstart",(()=>{this.toggle_elems.off("mouseenter",this._mouseenter_handle)})).on("dragend",(()=>{this.toggle_elems.on("mouseenter",this._mouseenter_handle)}))}mv_to_mobile(t){this.elem.detach().appendTo(t).addClass("mobile"),this.content.hide(),this.heading.off("click").on("click",(()=>{this.content.slideToggle("fast")}))}mv_to_sidebar(){this.elem.detach().appendTo(l.sidebar.content).removeClass("mobile"),this.heading.off("click"),this.content.show()}}const v=["/static/light.css","/static/dark.css"];class f{static initialize(t){let s=e("#switch_mode",t);if(s.length)return l.theme_switcher=new f(s),l.theme_switcher}constructor(t){this.elem=t,this.modes=v,this.link=e("head #colormode-styles"),this.elem.off("click").on("click",this.switch_theme.bind(this));let s=h("modeswitch");s||(s=this.modes[0]),this.current=s}get current(){return this.link.attr("href")}set current(t){this.link.attr("href",t),n("modeswitch",t,null);let e=t!==this.modes[0];this.elem.prop("checked",e)}switch_theme(t){t.stopPropagation();let e=this.modes;this.current=this.current===e[0]?e[1]:e[0]}}class z extends o{static initialize(t){let s=e("#topnav-content",t);if(s.length)return l.mobile_nav=new z(s),l.mobile_nav}constructor(t){super(),this.elem=t,this.viewport_changed()}viewport_changed(t){t&&super.viewport_changed(t),null!==l.mainmenu_sidebar?this.vp_state===s.MOBILE?(l.mainmenu_sidebar.mv_to_mobile(this.elem),null!==l.mainmenu_top&&l.mainmenu_top.elem.hide()):(l.mainmenu_sidebar.mv_to_sidebar(),null!==l.mainmenu_top&&l.mainmenu_top.elem.show()):null===l.mainmenu_sidebar&&null!==l.mainmenu_top&&(this.vp_state===s.MOBILE?l.mainmenu_top.mv_to_mobile():l.mainmenu_top.mv_to_top()),null!==l.mainmenu_top&&(this.vp_state===s.MOBILE?e("#cone-logo").css("margin-right","auto"):e("#cone-logo").css("margin-right","2rem")),null!==l.navtree&&(this.vp_state===s.MOBILE?l.navtree.mv_to_mobile(this.elem):l.navtree.mv_to_sidebar())}}e((function(){bdajax.register(b.initialize,!0),bdajax.register(_.initialize,!0),bdajax.register(p.initialize,!0),bdajax.register(f.initialize,!0),bdajax.register(a.initialize,!0),bdajax.register(d.initialize,!0),bdajax.register(w.initialize,!0),bdajax.register(g.initialize,!0),bdajax.register(z.initialize,!0)})),t.Content=g,t.MainMenuItem=u,t.MainMenuSidebar=d,t.MainMenuTop=_,t.MobileNav=z,t.Navtree=w,t.ScrollBar=c,t.ScrollBarX=m,t.ScrollBarY=class extends c{constructor(t){super(t)}compile(){this.content.addClass("scroll-content"),this.elem.addClass("scroll-container").prepend(this.scrollbar),this.scrollbar.append(this.thumb),this.thumb.css("width","6px"),this.scrollbar.css("width","6px"),this.scrollbar.css("right","0px"),this.scrollsize=this.elem.outerHeight(),this.contentsize=this.content.outerHeight(),this.scrollbar.css("height",this.scrollsize),this.thumbsize=this.scrollsize/(this.contentsize/this.scrollsize),this.thumb.css("height",this.thumbsize)}update(){this.scrollsize=this.elem.outerHeight(),this.scrollbar.css("height",this.scrollsize),this.content.outerHeight()!==this.contentsize&&(this.contentsize=this.content.outerHeight()),this.contentsize<=this.scrollsize?this.thumbsize=this.scrollsize:this.thumbsize=Math.pow(this.scrollsize,2)/this.contentsize,this.thumb.css("height",this.thumbsize),this.set_position()}set_position(){this.prevent_overflow();let t=this.position/(this.contentsize/this.scrollsize);this.content.css("bottom",this.position+"px"),this.thumb.css("top",t+"px")}get_evt_data(t){return t.pageY}get_offset(){return this.elem.offset().top}},t.Searchbar=p,t.Sidebar=a,t.ThemeSwitcher=f,t.Topnav=b,t.ViewPortAware=o,t.createCookie=n,t.default_themes=v,t.layout=l,t.readCookie=h,t.toggle_arrow=r,t.vp=i,t.vp_states=s,Object.defineProperty(t,"__esModule",{value:!0});var k=window.cone;return t.noConflict=function(){return window.cone=k,this},window.cone=t,t}({},jQuery);
