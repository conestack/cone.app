var cone=function(e,t){"use strict";const s=new class{constructor(){this.state=null,this._mobile_query="(max-width:559.9px)",this._small_query="(min-width:560px) and (max-width: 989.9px)",this._medium_query="(min-width:560px) and (max-width: 1200px)",this.update_viewport(),t(window).on("resize",this.resize_handle.bind(this))}update_viewport(){window.matchMedia(this._mobile_query).matches?this.state=0:window.matchMedia(this._small_query).matches?this.state=1:window.matchMedia(this._medium_query).matches?this.state=2:this.state=3}resize_handle(e){let s=this.state;if(this.update_viewport(),e&&s!=this.state){var i=t.Event("viewport_changed");i.state=this.state,t(window).trigger(i)}}};class i{constructor(){this.vp_state=s.state,this._viewport_changed_handle=this.viewport_changed.bind(this),t(window).on("viewport_changed",this._viewport_changed_handle)}unload(){t(window).off("viewport_changed",this._viewport_changed_handle)}viewport_changed(e){this.vp_state=e.state}}function o(e,t,s){var i,o;s?((i=new Date).setTime(i.getTime()+24*s*60*60*1e3),o="; expires="+i.toGMTString()):o="",document.cookie=e+"="+escape(t)+o+"; path=/;"}function n(e){var t,s,i=e+"=",o=document.cookie.split(";");for(t=0;t<o.length;t+=1){for(s=o[t];" "===s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(i))return unescape(s.substring(i.length,s.length))}return null}function l(e){e.hasClass("bi-chevron-up")?(e.removeClass("bi-chevron-up"),e.addClass("bi-chevron-down")):(e.removeClass("bi-chevron-down"),e.addClass("bi-chevron-up"))}let h={theme_switcher:null,mainmenu_top:null,mainmenu_sidebar:null,navtree:null,sidebar:null,mobile_nav:null,content:null,topnav:null,searchbar:null};class a extends i{static initialize(e){let s=t("#sidebar_left",e);if(s.length)return h.sidebar=new a(s),h.sidebar}constructor(e){super(),this.elem=e,this.content=t("#sidebar_content",e),this.toggle_btn=t("#sidebar-toggle-btn",e),this.toggle_arrow_elem=t("i",this.toggle_btn),this.lock_switch=t("#toggle-fluid"),this.cookie=null,this.collapsed=!1,this._toggle_menu_handle=this.toggle_menu.bind(this),this.toggle_btn.off("click").on("click",this._toggle_menu_handle),this._toggle_lock=this.toggle_lock.bind(this),this.lock_switch.off("click").on("click",this._toggle_lock),this.initial_load()}initial_load(){let e=n("sidebar");0===this.vp_state?this.elem.hide():null===e?3!==this.vp_state?this.collapsed=!0:this.collapsed=!1:(this.cookie="true"===e,this.collapsed=this.cookie,this.lock_switch.addClass("active")),this.viewport_changed()}assign_state(){let e=!0===this.collapsed?"collapsed":"expanded",s="bi bi-arrow-"+(!0===this.collapsed?"right":"left")+"-circle";this.elem.attr("class",e),this.toggle_arrow_elem.attr("class",s);var i=t.Event(`sidebar_${e}`);t(window).trigger(i)}toggle_lock(){n("sidebar")?(o("sidebar","",-1),this.lock_switch.removeClass("active"),this.cookie=null):(this.lock_switch.addClass("active"),o("sidebar",this.collapsed,null),this.cookie=this.collapsed)}viewport_changed(e){if(e&&super.viewport_changed(e),0===this.vp_state)this.collapsed=!1,this.elem.hide();else if(null!==this.cookie)this.collapsed=this.cookie,this.elem.show();else if(1===this.vp_state){this.elem.show();let e=1===this.vp_state;e!=this.collapsed&&(this.collapsed=e)}else this.collapsed=!1,this.elem.show();this.assign_state()}toggle_menu(){this.collapsed=!this.collapsed,this.lock_switch.hasClass("active")&&(o("sidebar",this.collapsed,null),this.cookie=this.collapsed),this.assign_state()}}class r{constructor(e){this.elem=e,this.content=t(">",this.elem),this.scrollbar=t('<div class="scrollbar" />'),this.thumb=t('<div class="scroll-handle" />'),this.position=0,this.unit=10,this.compile(),this.observe_container(),this._scroll=this.scroll_handle.bind(this),this.elem.on("mousewheel wheel",this._scroll),this._click_handle=this.click_handle.bind(this),this.scrollbar.on("click",this._click_handle),this._drag_handle=this.drag_handle.bind(this),this.thumb.on("mousedown",this._drag_handle),this._mousehandle=this.mouse_in_out.bind(this),this.elem.on("mouseenter mouseleave",this._mousehandle)}observe_container(){this.scrollbar_observer=new ResizeObserver((e=>{for(let t of e)this.update()})),this.scrollbar_observer.observe(this.elem.get(0))}compile(){throw"Abstract ScrollBar does not implement compile()"}update(){throw"Abstract ScrollBar does not implement update()"}unload(){this.scrollbar.off("click",this._click_handle),this.elem.off("mousewheel wheel",this._scroll),this.elem.off("mouseenter mouseleave",this._mousehandle),this.thumb.off("mousedown",this._drag_handle),this.scrollbar_observer.unobserve(this.elem.get(0))}mouse_in_out(e){this.contentsize>this.scrollsize&&("mouseenter"==e.type?this.scrollbar.fadeIn():this.scrollbar.fadeOut())}scroll_handle(e){if(this.contentsize<=this.scrollsize)return;let t=e.originalEvent;"number"==typeof t.deltaY&&(t.deltaY>0?this.position+=this.unit:t.deltaY<0&&(this.position-=this.unit)),this.set_position()}prevent_overflow(){let e=this.contentsize-this.scrollsize;this.position>=e?this.position=e:this.position<=0&&(this.position=0)}click_handle(e){e.preventDefault(),this.thumb.addClass("active");let t=this.get_evt_data(e)-this.get_offset()-this.thumbsize/2;this.position=this.contentsize*t/this.scrollsize,this.set_position(),this.thumb.removeClass("active")}drag_handle(e){e.preventDefault();var s=t.Event("dragstart");t(window).trigger(s);let i=function(e){let t=this.get_evt_data(e)-this.get_offset(),s=l+t-n;this.position=this.contentsize*s/this.scrollsize,this.set_position()}.bind(this),o=function(){var e=t.Event("dragend");t(window).trigger(e),t(document).off("mousemove",i).off("mouseup",o),this.thumb.removeClass("active"),this.elem.on("mouseenter mouseleave",this._mousehandle)}.bind(this),n=this.get_evt_data(e)-this.get_offset(),l=this.position/(this.contentsize/this.scrollsize);this.thumb.addClass("active"),this.elem.off("mouseenter mouseleave",this._mousehandle),t(document).on("mousemove",i).on("mouseup",o)}}class d extends r{constructor(e){super(e)}compile(){this.content.addClass("scroll-content"),this.elem.addClass("scroll-container").prepend(this.scrollbar),this.scrollbar.append(this.thumb),this.thumb.css("height","6px"),this.scrollbar.css("height","6px"),this.scrollsize=this.elem.outerWidth(),this.contentsize=this.content.outerWidth(),this.scrollbar.css("width",this.scrollsize),this.thumbsize=this.scrollsize/(this.contentsize/this.scrollsize),this.thumb.css("width",this.thumbsize)}update(){this.scrollsize=this.elem.outerWidth(),this.scrollbar.css("width",this.scrollsize),this.content.outerWidth()!==this.contentsize&&(this.contentsize=this.content.outerWidth()),this.contentsize<=this.scrollsize?this.thumbsize=this.scrollsize:this.thumbsize=Math.pow(this.scrollsize,2)/this.contentsize,this.thumb.css("width",this.thumbsize),this.set_position()}set_position(){this.prevent_overflow();let e=this.position/(this.contentsize/this.scrollsize);this.content.css("right",this.position+"px"),this.thumb.css("left",e+"px")}get_evt_data(e){return e.pageX}get_offset(){return this.elem.offset().left}}class c{static initialize(e){let s=t("#mainmenu_sidebar",e);if(s.length)return null!==h.mainmenu_sidebar&&h.mainmenu_sidebar.unload(),h.mainmenu_sidebar=new c(s),h.mainmenu_sidebar}constructor(e){this.elem=e,this.items=t('>li:not(".sidebar-heading")',this.elem),this.arrows=t("i.dropdown-arrow",this.items),this.menus=t(".sb-menu",this.elem),this.initial_cookie(),this._collapse=this.collapse.bind(this),this._expand=this.expand.bind(this),h.sidebar.collapsed?this.collapse():this.expand(),t(window).on("sidebar_collapsed",this._collapse),t(window).on("sidebar_expanded",this._expand)}unload(){this.items.off(),this.arrows.off()}initial_cookie(){let e=n("sidebar menus");if(e)this.display_data=e.split(",");else{this.display_data=[];for(let e of this.menus)this.display_data.push("none")}}collapse(){t("ul",this.items).hide(),this.arrows.off("click");for(let e of this.items){let s=t(e),i=t("ul",s);function o(){s.addClass("hover");let e=s.outerWidth(),t=i.outerWidth();e>t?i.css("width",e):s.css("width",t),i.show()}s.off().on("mouseenter",o),s.on("mouseleave",(()=>{i.hide(),s.removeClass("hover").css("width","auto")})),t(window).on("dragstart",(()=>{s.off("mouseenter",o)})).on("dragend",(()=>{s.on("mouseenter",o)}))}}expand(){this.items.off("mouseenter mouseleave");for(let e=0;e<this.menus.length;e++){let s=this.menus[e],i=t("i.dropdown-arrow",s),n=t("ul.cone-mainmenu-dropdown-sb",s);n.css("display",this.display_data[e]),"block"===n.css("display")?i.removeClass("bi-chevron-down").addClass("bi-chevron-up"):i.removeClass("bi-chevron-up").addClass("bi-chevron-down"),i.off().on("click",(()=>{let t="block"===n.css("display")?"none":"block";n.slideToggle("fast"),l(i),this.display_data[e]=t,o("sidebar menus",this.display_data,null)}))}}}class m{static initialize(e){let s=t("#main-menu",e);if(s.length)return h.mainmenu_top=new m(s),h.mainmenu_top}constructor(e){this.elem=e,new d(e),this.main_menu_items=[];let s=this;this.content=t("ul#mainmenu"),t("li",this.content).each((function(){let e=new u(t(this));s.main_menu_items.push(e)})),h.topnav.logo.addClass("m_right"),this.handle_scrollbar()}handle_scrollbar(){for(let e of this.main_menu_items)t(window).on("dragstart",(()=>{e.elem.off("mouseenter mouseleave",e._toggle)})).on("dragend",(()=>{e.elem.on("mouseenter mouseleave",e._toggle)}))}}class u{constructor(e){this.elem=e,this.children=e.data("menu-items"),this.children&&(this.menu=t('\n            <div class="cone-mainmenu-dropdown">\n                <ul class="mainmenu-dropdown">\n                </ul>\n            </div>\n        '),this.dd=t("ul",this.menu),this.arrow=t("i.dropdown-arrow",this.elem),this.render_dd(),this._toggle=this.mouseenter_toggle.bind(this),this.elem.off().on("mouseenter mouseleave",this._toggle),this.menu.off().on("mouseenter mouseleave",(()=>{this.menu.toggle()})))}render_dd(){for(let e in this.children){let s=this.children[e],i=t(`\n              <li class="${s.selected?"active":""}">\n                <a href="${s.url}"\n                   title="${s.title}">\n                  <i class="${s.icon}"></i>\n                  <span>\n                    ${s.title?s.title:"&nbsp;"}\n                  </span>\n                </a>\n              </li>\n            `);this.dd.append(i)}this.menu.appendTo("#layout")}mouseenter_toggle(e){this.menu.offset({left:this.elem.offset().left}),"mouseenter"===e.type?this.menu.css("display","block"):this.menu.css("display","none")}}class _ extends i{static initialize(e){let s=t("#cone-searchbar",e);if(s.length)return h.searchbar=new _(s),h.searchbar}constructor(e){super(),this.elem=e,this.search_text=t("#livesearch-input",this.elem),this.search_group=t("#livesearch-group",this.elem),this.dd=t("#cone-livesearch-dropdown",this.elem),1!==this.vp_state&&2!==this.vp_state||(this.dd.addClass("dropdown-menu-end"),this.search_text.detach().prependTo(this.dd))}viewport_changed(e){super.viewport_changed(e),1===this.vp_state||2===this.vp_state?(this.dd.addClass("dropdown-menu-end"),this.search_text.detach().prependTo(this.dd)):(this.search_text.detach().prependTo(this.search_group),this.dd.removeClass("dropdown-menu-end"))}}class p{static initialize(e){let s=t("#page-content-wrapper",e);if(s.length)return h.content=new p(s),h.content}constructor(e){this.elem=e}}class g extends i{static initialize(e){let s=t("#topnav",e);if(s.length)return h.topnav=new g(s),h.topnav}constructor(e){super(),this.elem=e,this.content=t("#topnav-content",e),this.toggle_button=t("#mobile-menu-toggle",e),this.logo=t("#cone-logo",e),this.tb_dropdowns=t("#toolbar-top>li.dropdown",e),this._toggle_menu_handle=this.toggle_menu.bind(this),this.toggle_button.on("click",this._toggle_menu_handle),this.viewport_changed(),this.pt=t("#personaltools"),this.user=t("#user"),this.pt_handle()}toggle_menu(){"none"===this.content.css("display")?(this.content.slideToggle("fast"),this.content.css("display","flex")):this.content.slideToggle("fast")}viewport_changed(e){e&&super.viewport_changed(e),0===this.vp_state?(this.content.hide(),this.elem.addClass("mobile"),this.tb_dropdowns.off().on("show.bs.dropdown",(()=>{this.content.hide()}))):(this.content.show(),this.elem.removeClass("mobile"),this.tb_dropdowns.off()),this.pt&&this.pt_handle()}pt_handle(){0===this.vp_state?(this.pt.off("show.bs.dropdown").on("show.bs.dropdown",(()=>{this.user.stop(!0,!0).slideDown("fast"),l(t("i.dropdown-arrow","#personaltools"))})),this.pt.off("hide.bs.dropdown").on("hide.bs.dropdown",(()=>{this.user.stop(!0,!0).slideUp("fast"),l(t("i.dropdown-arrow","#personaltools"))}))):(this.pt.off("show.bs.dropdown").on("show.bs.dropdown",(()=>{this.user.show()})),this.pt.off("hide.bs.dropdown").on("hide.bs.dropdown",(()=>{this.user.hide()})))}}class b{static initialize(e){let s=t("#navtree",e);if(s.length)return h.navtree=new b(s),h.navtree}constructor(e){this.elem=e,this.content=t("#navtree-content",e),this.heading=t("#navtree-heading",e),this.toggle_elems=t("li.navtreelevel_1",e),this._mouseenter_handle=this.align_width.bind(this),this.toggle_elems.on("mouseenter",this._mouseenter_handle),this._restore=this.restore_width.bind(this),this.toggle_elems.on("mouseleave",this._restore),this.scrollbar_handle()}unload(){this.heading.off("click"),this.toggle_elems.off("mouseenter",this._mouseenter_handle).off("mouseleave",this._restore)}align_width(e){let s=t(e.currentTarget);s.addClass("hover"),s.outerWidth()>t("ul",s).outerWidth()?t("ul",s).css("width",s.outerWidth()):s.css("width",t("ul",s).outerWidth())}restore_width(e){t(e.currentTarget).css("width","auto"),t(e.currentTarget).removeClass("hover")}scrollbar_handle(){t(window).on("dragstart",(()=>{this.toggle_elems.off("mouseenter",this._mouseenter_handle)})).on("dragend",(()=>{this.toggle_elems.on("mouseenter",this._mouseenter_handle)}))}}const w=["/static/light.css","/static/dark.css"];class v{static initialize(e){let s=t("#switch_mode",e);if(s.length)return h.theme_switcher=new v(s),h.theme_switcher}constructor(e){this.elem=e,this.modes=w,this.link=t("head #colormode-styles"),this.elem.off("click").on("click",this.switch_theme.bind(this));let s=n("modeswitch");s||(s=this.modes[0]),this.current=s}get current(){return this.link.attr("href")}set current(e){this.link.attr("href",e),o("modeswitch",e,null);let t=e!==this.modes[0];this.elem.prop("checked",t)}switch_theme(e){e.stopPropagation();let t=this.modes;this.current=this.current===t[0]?t[1]:t[0]}}class f extends i{static initialize(e){let s=t("#topnav-content",e);if(s.length)return h.mobile_nav=new f(s),h.mobile_nav}constructor(e){super(),this.elem=e,this.viewport_changed()}viewport_changed(e){e&&super.viewport_changed(e),0===this.vp_state?(this.mv_mmsb_to_mobile(),this.mv_mmtop_to_mobile(),this.mv_navtree_to_mobile()):(this.mv_mmsb_to_sidebar(),this.mv_mmtop_to_top(),this.mv_navtree_to_sidebar())}mv_mmsb_to_mobile(){let e=h.mainmenu_sidebar;null!==e&&(e.elem.detach().appendTo(this.elem).addClass("mobile"),e.expand())}mv_mmsb_to_sidebar(){let e=h.mainmenu_sidebar;null!==e&&e.elem.detach().appendTo(h.sidebar.content).removeClass("mobile")}mv_navtree_to_mobile(){let e=h.navtree;null!==e&&(e.elem.detach().appendTo(this.elem).addClass("mobile"),e.content.hide(),e.heading.off("click").on("click",(()=>{e.content.slideToggle("fast")})))}mv_navtree_to_sidebar(){let e=h.navtree;null!==e&&(e.elem.detach().appendTo(h.sidebar.content).removeClass("mobile"),e.heading.off("click"),e.content.show())}mv_mmtop_to_mobile(){let e=h.mainmenu_top,t=h.mainmenu_sidebar;if(null===e)return;if(null!==t)return void e.elem.hide();let s=h.mainmenu_top.main_menu_items;for(let e in s){let t=s[e];t.menu&&(t.menu.off().detach().appendTo(t.elem).css("left","0"),t.elem.off(),t.arrow.off().on("click",(()=>{t.menu.slideToggle("fast"),l(t.arrow)})))}}mv_mmtop_to_top(){let e=h.mainmenu_top,t=h.mainmenu_sidebar;if(null===e)return;if(null!==t)return void e.elem.show();let s=e.main_menu_items;for(let e in s){let t=s[e];t.menu&&(t.menu.detach().appendTo("#layout"),t.arrow.off(),t.elem.off().on("mouseenter mouseleave",t._toggle),t.menu.off().on("mouseenter mouseleave",(()=>{t.menu.toggle()})))}}}return t((function(){bdajax.register(g.initialize,!0),bdajax.register(m.initialize,!0),bdajax.register(_.initialize,!0),bdajax.register(v.initialize,!0),bdajax.register(a.initialize,!0),bdajax.register(c.initialize,!0),bdajax.register(b.initialize,!0),bdajax.register(p.initialize,!0),bdajax.register(f.initialize,!0)})),e.Content=p,e.MainMenuItem=u,e.MainMenuSidebar=c,e.MainMenuTop=m,e.MobileNav=f,e.Navtree=b,e.ScrollBar=r,e.ScrollBarX=d,e.ScrollBarY=class extends r{constructor(e){super(e)}compile(){this.content.addClass("scroll-content"),this.elem.addClass("scroll-container").prepend(this.scrollbar),this.scrollbar.append(this.thumb),this.thumb.css("width","6px"),this.scrollbar.css("width","6px"),this.scrollbar.css("right","0px"),this.scrollsize=this.elem.outerHeight(),this.contentsize=this.content.outerHeight(),this.scrollbar.css("height",this.scrollsize),this.thumbsize=this.scrollsize/(this.contentsize/this.scrollsize),this.thumb.css("height",this.thumbsize)}update(){this.scrollsize=this.elem.outerHeight(),this.scrollbar.css("height",this.scrollsize),this.content.outerHeight()!==this.contentsize&&(this.contentsize=this.content.outerHeight()),this.contentsize<=this.scrollsize?this.thumbsize=this.scrollsize:this.thumbsize=Math.pow(this.scrollsize,2)/this.contentsize,this.thumb.css("height",this.thumbsize),this.set_position()}set_position(){this.prevent_overflow();let e=this.position/(this.contentsize/this.scrollsize);this.content.css("bottom",this.position+"px"),this.thumb.css("top",e+"px")}get_evt_data(e){return e.pageY}get_offset(){return this.elem.offset().top}},e.Searchbar=_,e.Sidebar=a,e.ThemeSwitcher=v,e.Topnav=g,e.VP_LARGE=3,e.VP_MEDIUM=2,e.VP_MOBILE=0,e.VP_SMALL=1,e.ViewPortAware=i,e.createCookie=o,e.default_themes=w,e.layout=h,e.readCookie=n,e.toggle_arrow=l,e.vp=s,Object.defineProperty(e,"__esModule",{value:!0}),window.cone=e,e}({},jQuery);
