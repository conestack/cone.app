var cone_protected=function(t,e,i){"use strict";void 0===window.cone&&(window.cone={});class a{static initialize(t){new a(t)}constructor(t){this.tabs=e("ul.settingstabs a",t),this.tabs.on("click",this.load_tab).first().trigger("click")}load_tab(t){t.preventDefault();let a=e(this),s=i.ajax.parsetarget(a.attr("ajax:target"));i.ajax.request({url:s.url,params:s.params,success:function(t,i,s){let r=e(a).parent().parent();e("li",r).removeClass("active"),a.parent().addClass("active"),e(".settingstabpane").html(t).css("display","block").tsajax()}})}}class s{static initialize(t){new s(t,".batched_items_slice_size select",".batched_items_filter input","term")}constructor(t,e,i,a){this.context=t,this.size_selector=e,this.filter_selector=i,this.filter_name=a,this.bind_size(),this.bind_search()}bind_size(){e(this.size_selector,this.context).off("change").on("change",function(t){let i=e(t.currentTarget),a=e("option:selected",i).first();this.set_filter(i,"size",a.val())}.bind(this))}bind_search(){let t=e(this.filter_selector,this.context);t.hasClass("empty_filter")&&t.on("focus",(function(){this.value="",e(this).removeClass("empty_filter")})),t.off("keypress").on("keypress",(function(t){13==t.keyCode&&t.preventDefault()})),t.off("keyup").on("keyup",function(t){if(13==t.keyCode){t.preventDefault();let i=e(t.currentTarget);this.set_filter(i,this.filter_name,i.attr("value"))}}.bind(this)),t.off("change").on("change",function(t){t.preventDefault();let i=e(t.currentTarget);this.set_filter(i,this.filter_name,i.attr("value"))}.bind(this))}set_filter(t,e,a){let s=i.ajax.parsetarget(t.attr("ajax:target")),r=t.attr("ajax:event");if(s.params[e]=a,t.attr("ajax:path")){let n=t.attr("ajax:path-event");n||(n=r),i.ajax.path({path:s.path+s.query+"&"+e+"="+a,event:n,target:s})}let n=r.split(":");i.ajax.trigger(n[0],n[1],s)}}class r extends s{static initialize(t){new r(t,".table_length select",".table_filter input","term")}constructor(t,e,i,a){super(t,e,i,a)}}class n{static initialize(t){new n(t)}constructor(t){e("input.add_remove_role_for_principal",t).off("change").on("change",this.set_principal_role)}set_principal_role(t){t.preventDefault();let a,s=e(this);a=this.checked?"add_principal_role":"remove_principal_role";let r=s.parent().attr("ajax:target"),n={id:s.attr("name"),role:s.attr("value")};i.ajax.action({name:a,mode:"NONE",selector:"NONE",url:r,params:n})}}let l={shift_down:!1,ctrl_down:!1};class c{constructor(){e(window).on("keydown",this.key_down.bind(this)),e(window).on("keyup",this.key_up.bind(this))}key_down(t){switch(t.keyCode||t.which){case 16:l.shift_down=!0;break;case 17:l.ctrl_down=!0}}key_up(t){switch(t.keyCode||t.which){case 16:l.shift_down=!1;break;case 17:l.ctrl_down=!1}}}return e((function(){new c,i.ajax.register(a.initialize,!0),i.ajax.register(s.initialize,!0),i.ajax.register(r.initialize,!0),i.ajax.register(n.initialize,!0)})),t.BatchedItems=s,t.KeyBinder=c,t.SettingsTabs=a,t.Sharing=n,t.TableToolBar=r,t.keys=l,Object.defineProperty(t,"__esModule",{value:!0}),Object.assign(window.cone,t),t}({},jQuery,treibstoff);
