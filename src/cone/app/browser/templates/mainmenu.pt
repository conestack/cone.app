<tal:mainmenu xmlns:tal="http://xml.zope.org/namespaces/tal"
              xmlns:ajax="http://namespaces.conestack.org/ajax"
              omit-tag="True">

<div id="main-menu">
  <ul id="mainmenu"
      ajax:bind="contextchanged"
      ajax:action="mainmenu:#mainmenu:replace"
      tal:define="config context.config">

    <tal:item repeat="item context.menuitems">

      <li tal:define="children item['children'];
                      css 'active ' if item['selected'] else '';
                      
                      css css + 'menu ' if children else '';
                      css css + 'mainmenu-item';
                      css ' '.join([css, 'node-%s' % item['id']]);"
          tal:attributes="class css"
          data-menu-items='${context.to_json(children)}'>

        <a href="${item['url']}"
           title="${item['description']}"
           ajax:bind="click"
           ajax:target="${item['target']}"
           ajax:event="contextchanged:#layout"
           ajax:path="href">
          <i class="${item['icon']|nothing}"></i>
          <span tal:content="item['title'] | string:'&nbsp;'"
                class="mainmenu-title">
            Title
          </span>
        </a>
        <i tal:condition="children"
           class="dropdown-arrow bi bi-chevron-down">
        </i>
      </li>

    </tal:item>

  </ul>
</div>

</tal:mainmenu>
